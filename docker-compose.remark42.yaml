version: "2"

services:
  remark:
    image: umputun/remark42:latest
    container_name: "remark42"
    hostname: "remark42"
    restart: always

    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "5"

    # uncomment to expose directly (no proxy)
    #ports:
    #  - "80:8080"
    #  - "443:8443"

    environment:
      - LETSENCRYPT_HOST=remark42.goooseman.dev
      - LETSENCRYPT_EMAIL=goooseman@me.com
      - VIRTUAL_HOST=remark42.goooseman.dev
      - REMARK_URL=https://remark42.goooseman.dev
      - SECRET
      - DEBUG=true
      - AUTH_ANON=true
      - AUTH_GITHUB_CID
      - AUTH_GITHUB_CSEC
      - TELEGRAM_TOKEN
      - NOTIFY_ADMINS=telegram
      - NOTIFY_TELEGRAM_CHAN=
      - AUTH_TELEGRAM=true
      - SMTP_HOST
      - SMTP_PORT=465
      - SMTP_TLS=true
      - SMTP_USERNAME
      - SMTP_PASSWORD
      - AUTH_EMAIL_FROM=devsparks@goooseman.dev
      - NOTIFY_EMAIL_FROM=devsparks@goooseman.dev

      # Enable it only for the initial comment import or for manual backups.
      # Do not leave the server running with the ADMIN_PASSWD set if you don't have an intention
      # to keep creating backups manually!
      # - ADMIN_PASSWD=<your secret password>
    volumes:
      - ./var:/srv/var